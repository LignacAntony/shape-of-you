{% extends 'base.html.twig' %}

{% block title %}Proposition et création d'Outfit{% endblock %}

{% block body %}
    <h1>Création d'un Outfit pour la wardrobe : {{ wardrobe.name }}</h1>

    {# Formulaire de proposition via l'IA #}
    {{ form_start(formProposal, {
        'attr': {
            'id': 'proposal-form'
        }
    }) }}
    {{ form_row(formProposal.demande) }}
    <button type="submit" name="action" value="propose" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
        Proposer l'Outfit
    </button>
    {{ form_end(formProposal) }}

    {% if error %}
        <div style="color: red;">{{ error }}</div>
    {% endif %}

    {% if proposedOutfit is not null %}
        <h2>Proposition d'Outfit</h2>
        <ul>
            {% for item in proposedOutfit %}
                <li>
                    <strong>{{ item.name }} ({{ item.category }})</strong> – {{ item.reason }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    {# Formulaire de création de l'Outfit (affiché si une proposition est disponible) #}
    {% if formOutfit is not null %}
        <h2>Créer l'Outfit</h2>
        {{ form_start(formOutfit, {
            'method': 'POST',
            'attr': {
                'id': 'outfit-creation-form',
                'class': 'space-y-4'
            }
        }) }}
        <input type="hidden" name="action" value="create" />
        
        {{ form_row(formOutfit.name, {
            'attr': {
                'class': 'form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm'
            }
        }) }}
        
        {{ form_row(formOutfit.description, {
            'attr': {
                'class': 'form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm'
            }
        }) }}
        
        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Créer l'Outfit
        </button>
        {{ form_end(formOutfit) }}
    {% endif %}
{% endblock %}
