{% extends 'base.html.twig' %}

{% block title %}Modifier {{ wardrobe.name }}{% endblock %}

{% block body %}
    <div class="container mx-auto px-4 py-4">
        {% include 'components/back_button.html.twig' %}


        <div class="max-w-2xl mx-auto">
        {% include 'components/breadcrumb.html.twig' with {
            'wardrobe': wardrobe
        } %}
            <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                <div class="px-4 py-5 border-b border-gray-200 sm:px-6">
                    <h1 class="text-lg font-medium text-gray-900">
                        Modifier {{ wardrobe.name }}
                    </h1>
                </div>

                <div class="px-4 py-5 sm:p-6">
                    {{ form_start(form, {
                        'attr': {
                            'class': 'space-y-6'
                        }
                    }) }}

                    {# Informations de base #}
                    <div class="p-4">
                        <h2 class="text-xl font-bold text-primary-600 mb-4">Informations générales</h2>
                        
                        <div class="space-y-4">
                            <div>
                                {{ form_label(form.name, 'Nom', {'label_attr': {'class': 'form-label'}}) }}
                                {{ form_widget(form.name, {'attr': {'class': 'form-area w-full'}}) }}
                                {{ form_errors(form.name) }}
                            </div>

                            <div>
                                {{ form_label(form.description, 'Description', {'label_attr': {'class': 'form-label'}}) }}
                                {{ form_widget(form.description, {'attr': {'class': 'form-area w-full', 'rows': '3'}}) }}
                                {{ form_errors(form.description) }}
                            </div>
                        </div>
                    </div>

                    {# Image #}
                    <div class="p-4">
                        <h2 class="text-xl font-bold text-primary-600 mb-4">Image</h2>

                        {{ form_label(form.image, 'Changer l\'image', {'label_attr': {'class': 'form-label'}}) }}
                        {{ form_widget(form.image, {'attr': {'class': 'mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100'}}) }}
                        {{ form_errors(form.image) }}
                        
                        {% if wardrobe.image %}
                            <div class="mt-4">
                                <h3 class="text-sm font-medium text-gray-700 mb-2">Image actuelle :</h3>
                                <div class="relative group border border-gray-200 rounded-lg overflow-hidden" style="max-width: 200px;">
                                    <img src="{{ asset(wardrobe.image) }}" 
                                        alt="{{ wardrobe.name }}"
                                        class="w-full h-auto">
                                </div>
                            </div>
                        {% endif %}
                    </div>

                    <div class="flex justify-end gap-3">
                        <a href="{{ path('wardrobe_details', {'id': wardrobe.id}) }}" 
                        class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                            Annuler
                        </a>
                        <button type="submit"
                                class="px-4 py-2 text-sm font-medium text-white bg-primary-500 rounded-md hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                            Enregistrer les modifications
                        </button>
                    </div>

                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
{% endblock %}